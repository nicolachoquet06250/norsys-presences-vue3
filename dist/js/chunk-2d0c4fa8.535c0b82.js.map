{"version":3,"sources":["webpack:///./src/views/RecapHistorique.vue","webpack:///./src/views/RecapHistorique.vue?5f82"],"names":["class","recap_list","length","recap","key","format_date","creation_date","object","href","recap_id","go_to","name","setup","$router","show_loader","hide_loader","api_base","user","value","localStorage","getItem","push","console","log","fetch","token","then","r","json","date","Date","getDate","getMonth","getFullYear","render","__scopeId"],"mappings":"sNACOA,MAAM,a,EACP,eAIM,OAJDA,MAAM,OAAK,CACZ,eAEM,OAFDA,MAAM,UAAQ,CACf,eAAmB,UAAf,kB,MAGPA,MAAM,O,GACFA,MAAM,mB,GACFA,MAAM,kC,SACJA,MAAM,wC,EACT,eAAiE,cAAzD,oDAAgD,G,GAOnDA,MAAM,Q,GACJA,MAAM,a,GACLA,MAAM,c,GAGPA,MAAM,a,wEAtB7B,eAoCM,MApCN,EAoCM,CAnCF,EAKA,eA6BM,MA7BN,EA6BM,CA5BF,eA2BM,MA3BN,EA2BM,CA1BF,eAyBM,MAzBN,EAyBM,CAxBqE,IAAjB,EAAAC,WAAWC,Q,iBAAnE,eAEM,MAFN,EAEM,CADJ,M,mBAGF,eAmBI,8BAlBiB,EAAAD,YAAU,SAAnBE,G,wBADZ,eAmBI,OAjBEC,IAAKD,EACNH,MAAM,mB,CACT,eAcM,MAdN,EAcM,CAbJ,eAYM,MAZN,EAYM,CAXJ,eAEK,KAFL,EAEK,eADA,EAAAK,YAAYF,EAAMG,gBAAa,GAEpC,eAEI,IAFJ,EAEI,eADAH,EAAMI,QAAM,GAEhB,eAII,KAJAC,KAAI,iBAAYL,EAAMM,UACrB,QAAK,mCAAe,EAAAC,MAAA,iBAAgBP,EAAMM,aAAQ,oBACnDT,MAAM,mBAAkB,cAE5B,+B,+DAeL,GACbW,KAAM,kBAENC,MAHa,WAKX,IAAMC,EAAU,iBAFV,EAG+B,iBAA7BC,EAHF,EAGEA,YAAaC,EAHf,EAGeA,YAHf,EAIsC,iBAApCC,EAJF,EAIEA,SAAyBC,EAJ3B,EAIYA,KAAQC,MASpBjB,EAAa,eAAI,IAmBvB,OAjBAa,IAEA,gBAAc,WACPK,aAAaC,QAAQ,SACtBP,EAAQQ,KAAK,UAGjBC,QAAQC,IAAIN,GAEZO,MAAM,GAAD,OAAIR,EAAJ,mBAAuBC,EAAKQ,QAC9BC,MAAK,SAAAC,GAAA,OAAKA,EAAEC,UACZF,MAAK,SAAAE,GACF3B,EAAWiB,MAAQU,EACnBb,UAID,CACLd,aAEAS,MAHK,SAGCF,GACJK,EAAQQ,KAAKb,IAEfH,YANK,SAMOwB,GAEV,OADAA,EAAO,IAAIC,KAAKD,GAChB,UAAUA,EAAKE,UAAY,GAAK,IAAM,IAAtC,OAA2CF,EAAKE,UAAhD,YAA6DF,EAAKG,WAAa,GAAK,IAAM,IAA1F,OAA+FH,EAAKG,WAApG,YAAkHH,EAAKI,mBCrFjI,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d0c4fa8.535c0b82.js","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n      <div class=\"row\">\r\n          <div class=\"col-12\">\r\n              <h1>Historique</h1>\r\n          </div>\r\n      </div>\r\n      <div class=\"row\">\r\n          <div class=\"container-fluid\">\r\n              <div class=\"row historique-recap-container\">\r\n                <div class=\"col-12 d-flex justify-content-center\" v-if=\"recap_list.length === 0\">\r\n                  <strong>Aucun Récap hebdo n'à précédement été enregistré</strong>\r\n                </div>\r\n\r\n                <div v-else \r\n                     v-for=\"recap of recap_list\" \r\n                     :key=\"recap\" \r\n                     class=\"col-12 col-md-6\">\r\n                  <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                      <h5 class=\"card-title\">\r\n                        {{ format_date(recap.creation_date) }}\r\n                      </h5>\r\n                      <p class=\"card-text\">\r\n                        {{recap.object}}\r\n                      </p>\r\n                      <a :href=\"`/recap/${recap.recap_id}`\" \r\n                          @click.prevent.stop=\"go_to(`/recap/${recap.recap_id}`)\" \r\n                          class=\"btn btn-primary\">\r\n                        Voir plus\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n              </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { onBeforeMount, ref } from \"vue\";\r\n  import { useRouter } from \"vue-router\";\r\n  import { useLoader, useImmutables } from \"../store\";\r\n\r\n  export default {\r\n    name: \"RecapHistorique\",\r\n\r\n    setup() {\r\n      // hooks\r\n      const $router = useRouter();\r\n      const { show_loader, hide_loader } = useLoader();\r\n      const { api_base, user: { value: user } } = useImmutables();\r\n\r\n      // urls\r\n      // const api_base = 'https://norsys-sophia-presence.nicolaschoquet.fr/api';\r\n\r\n      // constantes\r\n      // const { token } = JSON.parse(localStorage.getItem('user'));\r\n\r\n      // refs\r\n      const recap_list = ref([]);\r\n\r\n      show_loader();\r\n\r\n      onBeforeMount(() => {\r\n        if (!localStorage.getItem('user')) {\r\n            $router.push('/login')\r\n        }\r\n\r\n        console.log(user);\r\n\r\n        fetch(`${api_base}/recaps/${user.token}`)\r\n          .then(r => r.json())\r\n          .then(json => {\r\n              recap_list.value = json;\r\n              hide_loader();\r\n          });\r\n      });\r\n\r\n      return {\r\n        recap_list,\r\n\r\n        go_to(href) {\r\n          $router.push(href);\r\n        },\r\n        format_date(date) {\r\n          date = new Date(date);\r\n          return `${date.getDate() < 10 ? '0' : ''}${date.getDate()}/${date.getMonth() < 10 ? '0' : ''}${date.getMonth()}/${date.getFullYear()}`;\r\n        }\r\n      };\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./RecapHistorique.vue?vue&type=template&id=7daee3dc&scoped=true\"\nimport script from \"./RecapHistorique.vue?vue&type=script&lang=js\"\nexport * from \"./RecapHistorique.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-7daee3dc\"\n\nexport default script"],"sourceRoot":""}