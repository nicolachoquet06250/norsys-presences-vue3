(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b0db170"],{1276:function(e,t,n){"use strict";var a=n("d784"),r=n("44e7"),l=n("825a"),c=n("1d80"),s=n("4840"),d=n("8aa5"),i=n("50c4"),o=n("14c3"),u=n("9263"),b=n("d039"),g=[].push,O=Math.min,j=4294967295,v=!b((function(){return!RegExp(j,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(c(this)),l=void 0===n?j:n>>>0;if(0===l)return[];if(void 0===e)return[a];if(!r(e))return t.call(a,e,l);var s,d,i,o=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),O=0,v=new RegExp(e.source,b+"g");while(s=u.call(v,a)){if(d=v.lastIndex,d>O&&(o.push(a.slice(O,s.index)),s.length>1&&s.index<a.length&&g.apply(o,s.slice(1)),i=s[0].length,O=d,o.length>=l))break;v.lastIndex===s.index&&v.lastIndex++}return O===a.length?!i&&v.test("")||o.push(""):o.push(a.slice(O)),o.length>l?o.slice(0,l):o}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=c(this),l=void 0==t?void 0:t[e];return void 0!==l?l.call(t,r,n):a.call(String(r),t,n)},function(e,r){var c=n(a,e,this,r,a!==t);if(c.done)return c.value;var u=l(e),b=String(this),g=s(u,RegExp),f=u.unicode,p=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),y=new g(v?u:"^(?:"+u.source+")",p),h=void 0===r?j:r>>>0;if(0===h)return[];if(0===b.length)return null===o(y,b)?[b]:[];var _=0,m=0,x=[];while(m<b.length){y.lastIndex=v?m:0;var k,w=o(y,v?b:b.slice(m));if(null===w||(k=O(i(y.lastIndex+(v?0:m)),b.length))===_)m=d(b,m,f);else{if(x.push(b.slice(_,m)),x.length===h)return x;for(var C=1;C<=w.length-1;C++)if(x.push(w[C]),x.length===h)return x;m=_=k}}return x.push(b.slice(_)),x}]}),!v)},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var l=n.call(e,t);if("object"!==typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"202b":function(e,t,n){"use strict";n("7b3e")},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),l=n("b622"),c=l("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==r(e))}},"7b3e":function(e,t,n){},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),l=RegExp.prototype.exec,c=String.prototype.replace,s=l,d=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),i=r.UNSUPPORTED_Y||r.BROKEN_CARET,o=void 0!==/()??/.exec("")[1],u=d||o||i;u&&(s=function(e){var t,n,r,s,u=this,b=i&&u.sticky,g=a.call(u),O=u.source,j=0,v=e;return b&&(g=g.replace("y",""),-1===g.indexOf("g")&&(g+="g"),v=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(O="(?: "+O+")",v=" "+v,j++),n=new RegExp("^(?:"+O+")",g)),o&&(n=new RegExp("^"+O+"$(?!\\s)",g)),d&&(t=u.lastIndex),r=l.call(b?n:u,v),b?r?(r.input=r.input.slice(j),r[0]=r[0].slice(j),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:d&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),o&&r&&r.length>1&&c.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),e.exports=s},"9f7f":function(e,t,n){"use strict";var a=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac0f:function(e,t,n){"use strict";n.r(t);var a=n("2909"),r=n("ade3"),l=(n("99af"),n("1276"),n("ac1f"),n("7a23")),c=Object(l["H"])("data-v-b867045a");Object(l["v"])("data-v-b867045a");var s={class:"container-fluid"},d={class:"row"},i={class:"col-12 mt-2"},o={class:"container-fluid calendar-header"},u={class:"row"},b={class:"col-12 col-md-12 date"},g=Object(l["g"])("div",{class:"row"},[Object(l["g"])("div",{class:"col-2"},[Object(l["g"])("strong",{class:"d-none d-md-inline"},"Lundi"),Object(l["g"])("strong",{class:"d-inline d-md-none"},"L.")]),Object(l["g"])("div",{class:"col-2"},[Object(l["g"])("strong",{class:"d-none d-md-inline"},"Mardi"),Object(l["g"])("strong",{class:"d-inline d-md-none"},"M.")]),Object(l["g"])("div",{class:"col-2"},[Object(l["g"])("strong",{class:"d-none d-md-inline"},"Mercredi"),Object(l["g"])("strong",{class:"d-inline d-md-none"},"M.")]),Object(l["g"])("div",{class:"col-2"},[Object(l["g"])("strong",{class:"d-none d-md-inline"},"Jeudi"),Object(l["g"])("strong",{class:"d-inline d-md-none"},"J.")]),Object(l["g"])("div",{class:"col-2"},[Object(l["g"])("strong",{class:"d-none d-md-inline"},"Vendredi"),Object(l["g"])("strong",{class:"d-inline d-md-none"},"V.")])],-1),O={class:"container-fluid calendar-body"},j={class:"badges-container"},v={key:0,class:"nb-reservations badge bg-secondary text-light"},f={class:"badge rounded-pill bg-info text-dark"},p={key:0},y={class:"d-none d-md-inline"},h={class:"d-none d-md-inline"},_=Object(l["g"])("div",{class:"col-0 col-md-2"},null,-1),m={class:"badges-container"},x={key:0,class:"nb-reservations badge bg-secondary text-light"},k={class:"badge rounded-pill bg-info text-dark"},w={key:0},C={class:"d-none d-md-inline"},E={class:"d-none d-md-inline"},R=Object(l["g"])("div",{class:"col-0 col-md-2"},null,-1),I={class:"row"},A={class:"col-12"},S={class:"table table-responsive"},N=Object(l["g"])("thead",null,[Object(l["g"])("tr",null,[Object(l["g"])("th",null,"Nom"),Object(l["g"])("th",null,"Prénom"),Object(l["g"])("th",null,"Email")])],-1),D={class:"reservations"},B={key:0},M=Object(l["g"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}}," Aucune réservation ce jour ",-1),P=Object(l["g"])("div",{class:"row"},[Object(l["g"])("div",{class:"col-12"},[Object(l["g"])("h2",null,"Personnes actuellement présentes")])],-1),T={class:"row"},H={class:"col-12"},J={class:"table table-responsive"},U=Object(l["g"])("thead",null,[Object(l["g"])("tr",null,[Object(l["g"])("th",null,"Nom"),Object(l["g"])("th",null,"Prénom"),Object(l["g"])("th",null,"Email"),Object(l["g"])("th",null,"Arrivée"),Object(l["g"])("th",null,"Départ")])],-1),Y={class:"presences"},F={key:0},L=Object(l["g"])("td",{colspan:"5",style:{"text-align":"center","font-weight":"bold"}}," Aucune personnes présentes ce jour ",-1);Object(l["t"])();var $=c((function(e,t,n,$,G,K){var V=Object(l["A"])("fragment"),q=Object(l["A"])("Modal");return Object(l["s"])(),Object(l["d"])(V,null,{default:c((function(){return[Object(l["g"])("div",s,[Object(l["g"])("div",d,[Object(l["g"])("div",i,[Object(l["g"])("div",o,[Object(l["g"])("div",u,[Object(l["g"])("div",b,[Object(l["g"])("h2",null,Object(l["C"])($.months[$.calendar_date.month])+" "+Object(l["C"])($.calendar_date.year),1)])]),g]),Object(l["g"])("div",O,[Object(l["g"])(V,{set:e.previous_month_nb_days=$.nb_days.previous},null,8,["set"]),Object(l["g"])("div",{class:"row",set:e.week_nb_str="number"===typeof $.calendar_keys[0]?"".concat($.calendar_keys[0]<10?"0":"").concat($.calendar_keys[0]):$.calendar_keys[0]},[Object(l["g"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),Object(l["g"])("div",null,Object(l["C"])(e.day),1),(Object(l["s"])(!0),Object(l["d"])(l["a"],null,Object(l["y"])(e.week,(function(e){return Object(l["s"])(),Object(l["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"previous-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(l["G"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(l["g"])("div",j,[e.reservations.length>0?(Object(l["s"])(),Object(l["d"])("span",v,Object(l["C"])(e.reservations.length),1)):Object(l["e"])("",!0),Object(l["g"])("span",f,Object(l["C"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(l["e"])("",!0):(Object(l["s"])(),Object(l["d"])("div",p,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(l["s"])(),Object(l["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(l["g"])("span",y,Object(l["C"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["g"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(l["s"])(),Object(l["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(l["G"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(l["g"])("span",h,Object(l["C"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["g"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),_],8,["set"]),Object(l["g"])(V,{set:e._calendar_keys=Object(a["a"])($.calendar_keys)},null,8,["set"]),Object(l["g"])(V,{set:e._calendar_keys.shift()},null,8,["set"]),(Object(l["s"])(!0),Object(l["d"])(l["a"],null,Object(l["y"])(e._calendar_keys,(function(t){return Object(l["s"])(),Object(l["d"])("div",{class:"row",key:t,set:e.week_nb_str="number"===typeof t?"".concat(t<10?"0":"").concat(t):t},[Object(l["g"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),(Object(l["s"])(!0),Object(l["d"])(l["a"],null,Object(l["y"])(e.week,(function(e){return Object(l["s"])(),Object(l["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"next-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(l["G"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(l["g"])("div",m,[e.reservations.length>0?(Object(l["s"])(),Object(l["d"])("span",x,Object(l["C"])(e.reservations.length),1)):Object(l["e"])("",!0),Object(l["g"])("span",k,Object(l["C"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(l["e"])("",!0):(Object(l["s"])(),Object(l["d"])("div",w,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(l["s"])(),Object(l["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(l["g"])("span",C,Object(l["C"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["g"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(l["s"])(),Object(l["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(l["G"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(l["g"])("span",E,Object(l["C"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["g"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),R],8,["set"])})),128))])])])]),Object(l["g"])(q,{title:$.selected_modal_day,body_title:"Réservations",opened:$.calendar_modal_opened,onClose:$.calendar_modal_closed},{default:c((function(){return[Object(l["g"])("div",I,[Object(l["g"])("div",A,[Object(l["g"])("table",S,[N,Object(l["g"])("tbody",D,[0===$.selected_day_reservations.length?(Object(l["s"])(),Object(l["d"])("tr",B,[M])):(Object(l["s"])(!0),Object(l["d"])(l["a"],{key:1},Object(l["y"])($.selected_day_reservations,(function(e){return Object(l["s"])(),Object(l["d"])("tr",{key:e},[Object(l["g"])("td",null,Object(l["C"])(e.firstname),1),Object(l["g"])("td",null,Object(l["C"])(e.lastname),1),Object(l["g"])("td",null,[Object(l["g"])("a",{href:"mailto:".concat(e.email)},Object(l["C"])(e.email),9,["href"])])])})),128))])])])]),P,Object(l["g"])("div",T,[Object(l["g"])("div",H,[Object(l["g"])("table",J,[U,Object(l["g"])("tbody",Y,[0===$.selected_day_presences.length?(Object(l["s"])(),Object(l["d"])("tr",F,[L])):(Object(l["s"])(!0),Object(l["d"])(l["a"],{key:1},Object(l["y"])($.selected_day_presences,(function(e){return Object(l["s"])(),Object(l["d"])("tr",{key:e},[Object(l["g"])("td",null,Object(l["C"])(e.firstname),1),Object(l["g"])("td",null,Object(l["C"])(e.lastname),1),Object(l["g"])("td",null,[Object(l["g"])("a",{href:"mailto:".concat(e.email)},Object(l["C"])(e.email),9,["href"])]),Object(l["g"])("td",null,Object(l["C"])(e.arrival),1),Object(l["g"])("td",null,Object(l["C"])(e.departure?e.departure:""),1)])})),128))])])])])]})),_:1},8,["title","opened","onClose"])]})),_:1})})),G=(n("b64b"),n("d81d"),n("d3b7"),n("ddb0"),n("13d5"),n("714b")),K=n("6c02"),V=n("4360"),q={name:"Calendar",components:{Modal:G["a"]},setup:function(e,t){var n=t.emit,r=Object(K["c"])(),c=Object(V["c"])(),s=c.api_base,d=c.days,i=c.months,o=c.user,u=o.value.id,b=Object(V["a"])(),g=b.calendar,O=b.calendar_date,j=b.current_date,v=b.nb_days,f=b.setCalendar,p=b.setCalendarDate,y=b.setNbDays,h=b.registerBankHoliday,_=b.getBankHolidayLabel,m=b.isBankHoliday,x=Object(V["d"])(),k=x.loader_visible,w=x.show_loader,C=x.hide_loader,E=Object(l["x"])(!1),R=Object(l["x"])(new Date),I=Object(l["x"])([]),A=Object(l["x"])([]),S=Object(l["b"])((function(){return 1===O.value.month?Object.keys(g.value):Object.keys(g.value).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t}))})),N=Object(l["b"])((function(){return d[R.value.getDay()]+" "+R.value.getDate()+" "+i[R.value.getMonth()+1]+" "+R.value.getFullYear()})),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w(),null===t&&(t=(new Date).getFullYear()),null===e&&(e=(new Date).getMonth()+1),fetch("".concat(s,"/calendar/").concat(t,"/").concat(e)).then((function(e){return e.json()})).then((function(e){f(e.calendar),p(e.year,e.month),y(e.nb_days.previous,e.nb_days.next),C()}))},B=function(e,t){return Object(a["a"])(Array(t-e).keys()).map((function(t){return t+e}))},M=function(e){return e.reservations.reduce((function(e,t){return t.id_user===JSON.parse(localStorage.getItem("user")).id&&(e=!0),e}),!1)},P=function(e){return O.value.full_current_date.getFullYear()+"-"+(O.value.full_current_date.getMonth()+1)+"-"+O.value.full_current_date.getDate()===e.date},T=function(e){var t=JSON.parse(e.target.hasAttribute("data-day")?e.target.getAttribute("data-day"):e.target.parentElement.getAttribute("data-day"));I.value=t.reservations,A.value=t.presences,R.value=new Date(t.date),E.value=!0,n("modal-opened")},H=function(){E.value=!1,n("modal-closed")},J=function(e){w(),fetch("".concat(s,"/reservation"),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({user_id:u,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||D(O.value.full_current_date.getMonth()+1,O.value.full_current_date.getFullYear()),C()}))},U=function(e){w(),fetch("".concat(s,"/reservation"),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({method:"delete",user_id:u,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||D(O.value.full_current_date.getMonth()+1,O.value.full_current_date.getFullYear()),C()}))},Y=function(e){return M(e)?U(e):J(e)},F=function(e,t){return e.external_day=void 0!==e.external_day&&e.external_day,(!e||!e.external_day&&!m(e.date))&&T(t)};return Object(l["n"])((function(){localStorage.getItem("user")||r.push("/login"),D(),h()})),{calendar:g,months:i,calendar_date:O,current_date:j,nb_days:v,calendar_modal_opened:E,selected_day_reservations:I,selected_day_presences:A,loader_visible:k,calendar_keys:S,selected_modal_day:N,request_calendar:D,range:B,reserved:M,is_today:P,build_modal:T,calendar_modal_closed:H,toggle_reservation:Y,getBankHolidayLabel:_,isBankHoliday:m,toggle_build_modal:F,show_loader:w,hide_loader:C}}};n("202b");q.render=$,q.__scopeId="data-v-b867045a";t["default"]=q},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),l=n("b622"),c=n("9263"),s=n("9112"),d=l("species"),i=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o=function(){return"$0"==="a".replace(/./,"$0")}(),u=l("replace"),b=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),g=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,u){var O=l(e),j=!r((function(){var t={};return t[O]=function(){return 7},7!=""[e](t)})),v=j&&!r((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[d]=function(){return n},n.flags="",n[O]=/./[O]),n.exec=function(){return t=!0,null},n[O](""),!t}));if(!j||!v||"replace"===e&&(!i||!o||b)||"split"===e&&!g){var f=/./[O],p=n(O,""[e],(function(e,t,n,a,r){return t.exec===c?j&&!r?{done:!0,value:f.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:b}),y=p[0],h=p[1];a(String.prototype,e,y),a(RegExp.prototype,O,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)})}u&&s(RegExp.prototype[O],"sham",!0)}}}]);
//# sourceMappingURL=chunk-4b0db170.7cde7716.js.map