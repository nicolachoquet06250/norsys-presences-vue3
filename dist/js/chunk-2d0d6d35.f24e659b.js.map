{"version":3,"sources":["webpack:///./src/views/Register.vue","webpack:///./src/views/Register.vue?be94"],"names":["class","id","ref","type","placeholder","for","value","alert","show","role","text","register","go_to","name","setup","$router","show_loader","hide_loader","api_base","firstname","lastname","password","password2","agency","url","push","fetch","method","body","JSON","stringify","then","r","json","error","message","timeout","setTimeout","clearTimeout","render","__scopeId"],"mappings":"kOACOA,MAAM,oB,GACJA,MAAM,O,SAEJA,MAAM,U,GASVA,MAAM,wB,GACHA,MAAM,O,GACLA,MAAM,wB,GACJA,MAAM,iB,GACFC,GAAG,YAAYC,IAAI,YAAYC,KAAK,OAAOC,YAAY,SAASJ,MAAM,gB,EAC7E,eAAqC,SAA9BK,IAAI,aAAY,UAAM,G,EAIjC,eAA0B,OAArBL,MAAM,UAAQ,S,GAEdA,MAAM,wB,GACJA,MAAM,iB,GACFC,GAAG,WAAWC,IAAI,WAAWC,KAAK,OAAOC,YAAY,iBAAiBJ,MAAM,gB,EACnF,eAA4C,SAArCK,IAAI,YAAW,kBAAc,G,EAIxC,eAA0B,OAArBL,MAAM,UAAQ,S,GAEdA,MAAM,wB,GACJA,MAAM,iB,GACFC,GAAG,aAAaC,IAAI,WAAWC,KAAK,WAAWC,YAAY,eAAeJ,MAAM,gB,EACvF,eAA4C,SAArCK,IAAI,cAAa,gBAAY,G,EAIxC,eAA0B,OAArBL,MAAM,UAAQ,S,GACdA,MAAM,wB,GACJA,MAAM,iB,GACFC,GAAG,aAAaC,IAAI,YAAYC,KAAK,WAAWC,YAAY,4BAA4BJ,MAAM,gB,EACrG,eAA4D,SAArDK,IAAI,cAAa,gCAA4B,G,GAWjDF,KAAK,SAASF,GAAG,SAASC,IAAI,SAASI,MAAM,K,EAEpD,eAA0B,OAArBN,MAAM,UAAQ,S,GAEdA,MAAM,wB,GAONA,MAAM,wB,oGAjEf,eAUM,MAVN,EAUM,CATJ,eAQM,MARN,EAQM,CANsB,EAAAO,MAAMC,M,iBAAhC,eAIM,MAJN,EAIM,CAHJ,eAEM,OAFAR,MAAK,0CAA0B,EAAAO,MAAMJ,OAAI,GAAYM,KAAK,S,eAC3D,EAAAF,MAAMG,MAAI,M,0BAOrB,eA4DM,MA5DN,EA4DM,CA3DJ,eA0DO,OA1DP,EA0DO,CAzDL,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAA8F,QAA9F,EAA8F,UAC9F,MAIJ,EAEA,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAAoG,QAApG,EAAoG,UACpG,MAIJ,EAEA,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAAwG,QAAxG,EAAwG,UACxG,MAIJ,EACA,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAAsH,QAAtH,EAAsH,UACtH,MAWJ,eAA0D,QAA1D,EAA0D,UAE1D,EAEA,eAKM,MALN,EAKM,CAJJ,eAGS,UAHDP,KAAK,SAASH,MAAM,kBACnB,QAAK,8CAAe,EAAAW,UAAA,EAAAA,SAAA,qBAAQ,sBAAE,kBAKzC,eAKM,MALN,EAKM,CAJJ,eAGS,UAHDR,KAAK,SAASF,GAAG,kBAAkBD,MAAM,eACxC,QAAK,+CAAe,EAAAY,MAAK,kCAAY,6B,2CAarC,GACbC,KAAM,WAENC,MAHa,WAKX,IAAMC,EAAU,iBAFV,EAG+B,iBAA7BC,EAHF,EAGEA,YAAaC,EAHf,EAGeA,YAHf,EAIe,iBAAbC,EAJF,EAIEA,SAGFC,EAAY,eAAI,MAChBC,EAAW,eAAI,MACfC,EAAW,eAAI,MACfC,EAAY,eAAI,MAChBC,EAAS,eAAI,MACbhB,EAAQ,eAAI,CAChBG,KAAM,GACNP,KAAM,GACNK,MAAM,IAGR,MAAO,CACLW,YACAC,WACAC,WACAC,YACAC,SACAhB,QAEAK,MARK,SAQCY,GACJT,EAAQU,KAAKD,IAGfb,SAZK,WAaH,GAAIU,EAASf,MAAMA,QAAUgB,EAAUhB,MAAMA,MAC3CU,IAEAU,MAAM,GAAD,OAAIR,EAAJ,kBAA8B,CACjCS,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBX,UAAWA,EAAUb,MAAMA,MAC3Bc,SAAUA,EAASd,MAAMA,MACzBe,SAAUA,EAASf,MAAMA,MACzBiB,OAAQA,EAAOjB,MAAMA,UAEtByB,MAAK,SAAAC,GAAA,OAAKA,EAAEC,UACZF,MAAK,SAAAE,GACJ,GAAIA,EAAKC,MAAO,CACd3B,EAAMD,MAAQ,CACZI,KAAMuB,EAAKE,QACXhC,KAAM,SACNK,MAAM,GAGR,IAAM4B,EAAUC,YAAW,WACzB9B,EAAMD,MAAME,MAAO,EACnB8B,aAAaF,KACZ,UACErB,EAAQU,KAAK,UAEpBR,WAEC,CACLV,EAAMD,MAAQ,CACZI,KAAM,8CACNP,KAAM,SACNK,MAAM,GAGR,IAAM4B,EAAUC,YAAW,WACzB9B,EAAMD,MAAME,MAAO,EACnB8B,aAAaF,KACZ,UCtJf,EAAOG,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d0d6d35.f24e659b.js","sourcesContent":["<template>\r\n  <div class=\"alerts container\">\r\n    <div class=\"row\">\r\n\r\n      <div class=\"col-12\" v-if=\"alert.show\">\r\n        <div :class=\"{alert: true, [`alert-${alert.type}`]: true}\" role=\"alert\">\r\n          {{ alert.text }}\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n      \r\n  <div class=\"container-fluid mt-2\">\r\n    <form class=\"row\">\r\n      <div class=\"col-12 col-md-6 mb-2\">\r\n        <div class=\"form-floating\">\r\n          <input id=\"firstname\" ref=\"firstname\" type=\"text\" placeholder=\"Prénom\" class=\"form-control\" />\r\n          <label for=\"firstname\">Prénom</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-12\"></div>\r\n\r\n      <div class=\"col-12 col-md-6 mb-2\">\r\n        <div class=\"form-floating\">\r\n          <input id=\"lastname\" ref=\"lastname\" type=\"text\" placeholder=\"Nom de famille\" class=\"form-control\" />\r\n          <label for=\"lastname\">Nom de famille</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-12\"></div>\r\n\r\n      <div class=\"col-12 col-md-6 mb-2\">\r\n        <div class=\"form-floating\">\r\n          <input id=\"password-1\" ref=\"password\" type=\"password\" placeholder=\"mot de passe\" class=\"form-control\" />\r\n          <label for=\"password-1\">Mot de passe</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-12\"></div>\r\n      <div class=\"col-12 col-md-6 mb-2\">\r\n        <div class=\"form-floating\">\r\n          <input id=\"password-2\" ref=\"password2\" type=\"password\" placeholder=\"confirmer le mot de passe\" class=\"form-control\" />\r\n          <label for=\"password-2\">Confirmation du mot de passe</label>\r\n        </div>\r\n      </div>\r\n\r\n      <!--<div class=\"col-12\"></div>\r\n      <div class=\"col-12 col-md-6 mb-2\">\r\n        <select id=\"agency\" class=\"form-select\" aria-label=\"Default select example\">\r\n          <option selected>Agence</option>\r\n        </select>\r\n      </div>-->\r\n\r\n      <input type=\"hidden\" id=\"agency\" ref=\"agency\" value=\"1\" />\r\n\r\n      <div class=\"col-12\"></div>\r\n\r\n      <div class=\"col-12 col-md-2 mb-2\">\r\n        <button type=\"submit\" class=\"btn btn-success\" \r\n                @click.prevent.stop=\"register\">\r\n          S'inscrire\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"col-12 col-md-3 mb-2\">\r\n        <button type=\"button\" id=\"alereay-account\" class=\"btn btn-info\" \r\n                @click.prevent.stop=\"go_to('/login')\">\r\n          Déjà un compte ?\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref } from \"vue\";\r\n  import { useRouter } from \"vue-router\";\r\n  import { useLoader, useImmutables } from \"../store\";\r\n\r\n  export default {\r\n    name: \"Register\",\r\n\r\n    setup() {\r\n      // hooks\r\n      const $router = useRouter();\r\n      const { show_loader, hide_loader } = useLoader();\r\n      const { api_base } = useImmutables();\r\n\r\n      // hooks\r\n      const firstname = ref(null);\r\n      const lastname = ref(null);\r\n      const password = ref(null);\r\n      const password2 = ref(null);\r\n      const agency = ref(null);\r\n      const alert = ref({\r\n        text: '',\r\n        type: '',\r\n        show: false\r\n      });\r\n\r\n      return {\r\n        firstname,\r\n        lastname,\r\n        password,\r\n        password2,\r\n        agency,\r\n        alert,\r\n\r\n        go_to(url) {\r\n          $router.push(url);\r\n        },\r\n\r\n        register() {\r\n          if (password.value.value === password2.value.value) {\r\n            show_loader();\r\n\r\n            fetch(`${api_base}/user/register`, {\r\n              method: 'post',\r\n              body: JSON.stringify({\r\n                firstname: firstname.value.value,\r\n                lastname: lastname.value.value,\r\n                password: password.value.value,\r\n                agency: agency.value.value\r\n              })\r\n            }).then(r => r.json())\r\n              .then(json => {\r\n                if (json.error) {\r\n                  alert.value = {\r\n                    text: json.message,\r\n                    type: 'danger',\r\n                    show: true\r\n                  };\r\n\r\n                  const timeout = setTimeout(() => {\r\n                    alert.value.show = false;\r\n                    clearTimeout(timeout);\r\n                  }, 4000);\r\n                } else $router.push('/login');\r\n\r\n                hide_loader();\r\n              });\r\n          } else {\r\n            alert.value = {\r\n              text: 'Les 2 mots de passes ne sont pas identiques',\r\n              type: 'danger',\r\n              show: true\r\n            };\r\n\r\n            const timeout = setTimeout(() => {\r\n              alert.value.show = false;\r\n              clearTimeout(timeout);\r\n            }, 4000);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Register.vue?vue&type=template&id=3a9cf7fb&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-3a9cf7fb\"\n\nexport default script"],"sourceRoot":""}