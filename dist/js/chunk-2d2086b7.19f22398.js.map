{"version":3,"sources":["webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b"],"names":["class","type","id","ref","placeholder","for","alert","show","role","text","loggin","go_to","name","setup","setLogged","$router","api_base","email","password","value","fetch","method","body","JSON","stringify","then","r","json","error","message","timeout","setTimeout","clearTimeout","localStorage","setItem","push","url","render","__scopeId"],"mappings":"gOAESA,MAAM,oB,GACJA,MAAM,O,SACJA,MAAM,U,GAQVA,MAAM,wB,GACHA,MAAM,O,GACLA,MAAM,wB,GACJA,MAAM,iB,GACFC,KAAK,QAAQC,GAAG,QAAQC,IAAI,QAAQC,YAAY,iBAAiBJ,MAAM,gB,EAC9E,eAAwD,SAAjDK,IAAI,SAAQ,iCAA6B,G,EAGpD,eAA0B,OAArBL,MAAM,UAAQ,S,GACdA,MAAM,wB,GACJA,MAAM,iB,GACFC,KAAK,WAAWC,GAAG,WAAWC,IAAI,WAAWC,YAAY,eAAeJ,MAAM,gB,EACrF,eAA0C,SAAnCK,IAAI,YAAW,gBAAY,G,EAGtC,eAA0B,OAArBL,MAAM,UAAQ,S,GACdA,MAAM,mB,GAGNA,MAAM,mB,yGA9BjB,eAmCW,Q,WAlCT,iBAQM,CARN,eAQM,MARN,EAQM,CAPJ,eAMM,MANN,EAMM,CALsB,EAAAM,MAAMC,M,iBAAhC,eAIM,MAJN,EAIM,CAHJ,eAEM,OAFAP,MAAK,0CAA0B,EAAAM,MAAML,OAAI,GAAYO,KAAK,S,eAC3D,EAAAF,MAAMG,MAAI,M,0BAMrB,eAuBM,MAvBN,EAuBM,CAtBJ,eAqBO,OArBP,EAqBO,CApBL,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAA+F,QAA/F,EAA+F,UAC/F,MAGJ,EACA,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,CAFJ,eAAsG,QAAtG,EAAsG,UACtG,MAGJ,EACA,eAEM,MAFN,EAEM,CADJ,eAAgG,UAAxFR,KAAK,SAASD,MAAM,kBAAmB,QAAK,8CAAe,EAAAU,QAAA,EAAAA,OAAA,qBAAM,sBAAE,kBAE7E,eAEM,MAFN,EAEM,CADJ,eAA+G,UAAvGR,GAAG,cAAcF,MAAM,eAAgB,QAAK,+CAAe,EAAAW,MAAK,qCAAe,6B,6CAYhF,GACbC,KAAM,QAENC,MAHa,WAGL,MAEgB,iBAAdC,EAFF,EAEEA,UACFC,EAAU,iBAHV,EAIe,iBAAbC,EAJF,EAIEA,SAMFC,EAAQ,eAAI,MACZC,EAAW,eAAI,MACfZ,EAAQ,eAAI,CAChBG,KAAM,GACNR,KAAM,GACNM,MAAM,IAGR,MAAO,CACLU,QACAC,WACAZ,QAEAI,OALK,WAMuB,KAAtBO,EAAME,MAAMA,OAAyC,KAAzBD,EAASC,MAAMA,OAC7CC,MAAM,GAAD,OAAIJ,EAAJ,eAA2B,CAC9BK,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBP,MAAOA,EAAME,MAAMA,MACnBD,SAAUA,EAASC,MAAMA,UAE1BM,MAAK,SAAAC,GAAA,OAAKA,EAAEC,UACZF,MAAK,SAAAE,GACJ,GAAKA,EAAKC,MAKH,CACHtB,EAAMa,MAAQ,CACZV,KAAMkB,EAAKE,QACX5B,KAAM,SACNM,MAAM,GAGR,IAAMuB,EAAUC,YAAW,WACzBzB,EAAMa,MAAMZ,MAAO,EACnByB,aAAaF,KACZ,UAdHG,aAAaC,QAAQ,OAAQX,KAAKC,UAAUG,IAC5CZ,EAAQoB,KAAK,KAEbrB,GAAU,OAgBtBH,MAnCK,SAmCCyB,GACJrB,EAAQoB,KAAKC,OClGvB,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d2086b7.19f22398.js","sourcesContent":["<template>\r\n  <fragment>\r\n    <div class=\"alerts container\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\" v-if=\"alert.show\">\r\n          <div :class=\"{alert: true, [`alert-${alert.type}`]: true}\" role=\"alert\">\r\n            {{ alert.text }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"container-fluid mt-2\">\r\n      <form class=\"row\">\r\n        <div class=\"col-12 col-md-6 mb-2\">\r\n          <div class=\"form-floating\">\r\n            <input type=\"email\" id=\"email\" ref=\"email\" placeholder=\"ldap@norsys.fr\" class=\"form-control\" />\r\n            <label for=\"email\">Email ( ex : ldap@norsys.fr )</label>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12\"></div>\r\n        <div class=\"col-12 col-md-6 mb-2\">\r\n          <div class=\"form-floating\">\r\n            <input type=\"password\" id=\"password\" ref=\"password\" placeholder=\"mot de passe\" class=\"form-control\" />\r\n            <label for=\"password\">Mot de passe</label>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12\"></div>\r\n        <div class=\"col-12 col-md-2\">\r\n          <button type=\"submit\" class=\"btn btn-success\" @click.prevent.stop=\"loggin\">Se connecter</button>\r\n        </div>\r\n        <div class=\"col-12 col-md-3\">\r\n          <button id=\"not-account\" class=\"btn btn-info\" @click.prevent.stop=\"go_to('/register')\">Pas de compte ?</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </fragment>\r\n</template>\r\n\r\n<script>\r\n  import { ref } from \"vue\";\r\n  import { useRouter } from \"vue-router\";\r\n  import { useLogged, useImmutables } from \"../store\";\r\n\r\n  export default {\r\n    name: \"Login\",\r\n\r\n    setup() {\r\n      // hooks\r\n      const { setLogged } = useLogged()\r\n      const $router = useRouter();\r\n      const { api_base } = useImmutables();\r\n\r\n      // urls\r\n      // const api_base = 'https://norsys-sophia-presence.nicolaschoquet.fr/api';\r\n\r\n      // refs\r\n      const email = ref(null);\r\n      const password = ref(null);\r\n      const alert = ref({\r\n        text: '',\r\n        type: '',\r\n        show: false\r\n      });\r\n\r\n      return {\r\n        email,\r\n        password,\r\n        alert,\r\n\r\n        loggin() {\r\n          if (email.value.value !== '' && password.value.value !== '') {\r\n            fetch(`${api_base}/user/login`, {\r\n              method: 'post',\r\n              body: JSON.stringify({\r\n                email: email.value.value,\r\n                password: password.value.value\r\n              })\r\n            }).then(r => r.json())\r\n              .then(json => {\r\n                if (!json.error) {\r\n                    localStorage.setItem('user', JSON.stringify(json));\r\n                    $router.push('/');\r\n                    \r\n                    setLogged(true)\r\n                } else {\r\n                    alert.value = {\r\n                      text: json.message,\r\n                      type: 'danger',\r\n                      show: true\r\n                    };\r\n\r\n                    const timeout = setTimeout(() => {\r\n                      alert.value.show = false;\r\n                      clearTimeout(timeout);\r\n                    }, 5000);\r\n                }\r\n              });\r\n          }\r\n        },\r\n        go_to(url) {\r\n          $router.push(url);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=abf48b72&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-abf48b72\"\n\nexport default script"],"sourceRoot":""}