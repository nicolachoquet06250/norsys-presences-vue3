(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b273522"],{1276:function(e,t,n){"use strict";var a=n("d784"),r=n("44e7"),l=n("825a"),c=n("1d80"),s=n("4840"),d=n("8aa5"),i=n("50c4"),o=n("14c3"),u=n("9263"),b=n("d039"),v=[].push,f=Math.min,h=4294967295,O=!b((function(){return!RegExp(h,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(c(this)),l=void 0===n?h:n>>>0;if(0===l)return[];if(void 0===e)return[a];if(!r(e))return t.call(a,e,l);var s,d,i,o=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,O=new RegExp(e.source,b+"g");while(s=u.call(O,a)){if(d=O.lastIndex,d>f&&(o.push(a.slice(f,s.index)),s.length>1&&s.index<a.length&&v.apply(o,s.slice(1)),i=s[0].length,f=d,o.length>=l))break;O.lastIndex===s.index&&O.lastIndex++}return f===a.length?!i&&O.test("")||o.push(""):o.push(a.slice(f)),o.length>l?o.slice(0,l):o}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=c(this),l=void 0==t?void 0:t[e];return void 0!==l?l.call(t,r,n):a.call(String(r),t,n)},function(e,r){var c=n(a,e,this,r,a!==t);if(c.done)return c.value;var u=l(e),b=String(this),v=s(u,RegExp),j=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(O?"y":"g"),p=new v(O?u:"^(?:"+u.source+")",g),y=void 0===r?h:r>>>0;if(0===y)return[];if(0===b.length)return null===o(p,b)?[b]:[];var _=0,m=0,x=[];while(m<b.length){p.lastIndex=O?m:0;var k,w=o(p,O?b:b.slice(m));if(null===w||(k=f(i(p.lastIndex+(O?0:m)),b.length))===_)m=d(b,m,j);else{if(x.push(b.slice(_,m)),x.length===y)return x;for(var E=1;E<=w.length-1;E++)if(x.push(w[E]),x.length===y)return x;m=_=k}}return x.push(b.slice(_)),x}]}),!O)},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var l=n.call(e,t);if("object"!==typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"21c1":function(e,t,n){},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),l=n("b622"),c=l("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==r(e))}},"4d84":function(e,t,n){"use strict";n("21c1")},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),l=RegExp.prototype.exec,c=String.prototype.replace,s=l,d=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),i=r.UNSUPPORTED_Y||r.BROKEN_CARET,o=void 0!==/()??/.exec("")[1],u=d||o||i;u&&(s=function(e){var t,n,r,s,u=this,b=i&&u.sticky,v=a.call(u),f=u.source,h=0,O=e;return b&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),O=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(f="(?: "+f+")",O=" "+O,h++),n=new RegExp("^(?:"+f+")",v)),o&&(n=new RegExp("^"+f+"$(?!\\s)",v)),d&&(t=u.lastIndex),r=l.call(b?n:u,O),b?r?(r.input=r.input.slice(h),r[0]=r[0].slice(h),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:d&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),o&&r&&r.length>1&&c.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),e.exports=s},"9f7f":function(e,t,n){"use strict";var a=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac0f:function(e,t,n){"use strict";n.r(t);var a=n("2909"),r=n("ade3"),l=(n("99af"),n("1276"),n("ac1f"),n("7a23")),c=Object(l["I"])("data-v-4f99349f");Object(l["w"])("data-v-4f99349f");var s={class:"container-fluid"},d={class:"row"},i={class:"col-12 mt-2"},o={class:"container-fluid calendar-header"},u={class:"row"},b={class:"col-12 col-md-12 date"},v=Object(l["f"])('<div class="row" data-v-4f99349f><div class="col-2" data-v-4f99349f><strong class="d-none d-md-inline" data-v-4f99349f>Lundi</strong><strong class="d-inline d-md-none" data-v-4f99349f>L.</strong></div><div class="col-2" data-v-4f99349f><strong class="d-none d-md-inline" data-v-4f99349f>Mardi</strong><strong class="d-inline d-md-none" data-v-4f99349f>M.</strong></div><div class="col-2" data-v-4f99349f><strong class="d-none d-md-inline" data-v-4f99349f>Mercredi</strong><strong class="d-inline d-md-none" data-v-4f99349f>M.</strong></div><div class="col-2" data-v-4f99349f><strong class="d-none d-md-inline" data-v-4f99349f>Jeudi</strong><strong class="d-inline d-md-none" data-v-4f99349f>J.</strong></div><div class="col-2" data-v-4f99349f><strong class="d-none d-md-inline" data-v-4f99349f>Vendredi</strong><strong class="d-inline d-md-none" data-v-4f99349f>V.</strong></div></div>',1),f={class:"container-fluid calendar-body"},h={class:"badges-container"},O={key:0,class:"nb-reservations badge bg-secondary text-light"},j={class:"badge rounded-pill bg-info text-dark"},g={key:0},p={class:"d-none d-md-inline"},y={class:"d-none d-md-inline"},_=Object(l["h"])("div",{class:"col-0 col-md-2"},null,-1),m={class:"badges-container"},x={key:0,class:"nb-reservations badge bg-secondary text-light"},k={class:"badge rounded-pill bg-info text-dark"},w={key:0},E={class:"d-none d-md-inline"},D={class:"d-none d-md-inline"},R=Object(l["h"])("div",{class:"col-0 col-md-2"},null,-1),I={class:"row"},C={class:"col-12"},S={class:"table table-responsive"},A=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"Nom"),Object(l["h"])("th",null,"Prénom"),Object(l["h"])("th",null,"Email")])],-1),N={class:"reservations"},B={key:0},H=Object(l["h"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}}," Aucune réservation ce jour ",-1),M=Object(l["h"])("div",{class:"row"},[Object(l["h"])("div",{class:"col-12"},[Object(l["h"])("h2",null,"Personnes actuellement présentes")])],-1),P={class:"row"},J={class:"col-12"},T={class:"table table-responsive"},U=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"Nom"),Object(l["h"])("th",null,"Prénom"),Object(l["h"])("th",null,"Email"),Object(l["h"])("th",null,"Arrivée"),Object(l["h"])("th",null,"Départ")])],-1),Y={class:"presences"},F={key:0},L=Object(l["h"])("td",{colspan:"5",style:{"text-align":"center","font-weight":"bold"}}," Aucune personnes présentes ce jour ",-1);Object(l["u"])();var $=c((function(e,t,n,$,z,K){var V=Object(l["B"])("fragment"),q=Object(l["B"])("Modal");return Object(l["t"])(),Object(l["d"])(V,null,{default:c((function(){return[Object(l["h"])("div",s,[Object(l["h"])("div",d,[Object(l["h"])("div",i,[Object(l["h"])("div",o,[Object(l["h"])("div",u,[Object(l["h"])("div",b,[Object(l["h"])("h2",null,Object(l["D"])($.months[$.calendar_date.month])+" "+Object(l["D"])($.calendar_date.year),1)])]),v]),Object(l["h"])("div",f,[Object(l["h"])(V,{set:e.previous_month_nb_days=$.nb_days.previous},null,8,["set"]),Object(l["h"])("div",{class:"row",set:e.week_nb_str="number"===typeof $.calendar_keys[0]?"".concat($.calendar_keys[0]<10?"0":"").concat($.calendar_keys[0]):$.calendar_keys[0]},[Object(l["h"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),Object(l["h"])("div",null,Object(l["D"])(e.day),1),(Object(l["t"])(!0),Object(l["d"])(l["a"],null,Object(l["z"])(e.week,(function(e){return Object(l["t"])(),Object(l["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"previous-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(l["H"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(l["h"])("div",h,[e.reservations.length>0?(Object(l["t"])(),Object(l["d"])("span",O,Object(l["D"])(e.reservations.length),1)):Object(l["e"])("",!0),Object(l["h"])("span",j,Object(l["D"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(l["e"])("",!0):(Object(l["t"])(),Object(l["d"])("div",g,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(l["t"])(),Object(l["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(l["h"])("span",p,Object(l["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(l["t"])(),Object(l["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(l["H"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(l["h"])("span",y,Object(l["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),_],8,["set"]),Object(l["h"])(V,{set:e._calendar_keys=Object(a["a"])($.calendar_keys)},null,8,["set"]),Object(l["h"])(V,{set:e._calendar_keys.shift()},null,8,["set"]),(Object(l["t"])(!0),Object(l["d"])(l["a"],null,Object(l["z"])(e._calendar_keys,(function(t){return Object(l["t"])(),Object(l["d"])("div",{class:"row",key:t,set:e.week_nb_str="number"===typeof t?"".concat(t<10?"0":"").concat(t):t},[Object(l["h"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),(Object(l["t"])(!0),Object(l["d"])(l["a"],null,Object(l["z"])(e.week,(function(e){return Object(l["t"])(),Object(l["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"next-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(l["H"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(l["h"])("div",m,[e.reservations.length>0?(Object(l["t"])(),Object(l["d"])("span",x,Object(l["D"])(e.reservations.length),1)):Object(l["e"])("",!0),Object(l["h"])("span",k,Object(l["D"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(l["e"])("",!0):(Object(l["t"])(),Object(l["d"])("div",w,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(l["t"])(),Object(l["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(l["h"])("span",E,Object(l["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(l["t"])(),Object(l["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(l["H"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(l["h"])("span",D,Object(l["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(l["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),R],8,["set"])})),128))])])])]),Object(l["h"])(q,{title:$.selected_modal_day,body_title:"Réservations",opened:$.calendar_modal_opened,onClose:$.calendar_modal_closed},{default:c((function(){return[Object(l["h"])("div",I,[Object(l["h"])("div",C,[Object(l["h"])("table",S,[A,Object(l["h"])("tbody",N,[0===$.selected_day_reservations.length?(Object(l["t"])(),Object(l["d"])("tr",B,[H])):(Object(l["t"])(!0),Object(l["d"])(l["a"],{key:1},Object(l["z"])($.selected_day_reservations,(function(e){return Object(l["t"])(),Object(l["d"])("tr",{key:e},[Object(l["h"])("td",null,Object(l["D"])(e.firstname),1),Object(l["h"])("td",null,Object(l["D"])(e.lastname),1),Object(l["h"])("td",null,[Object(l["h"])("a",{href:"mailto:".concat(e.email)},Object(l["D"])(e.email),9,["href"])])])})),128))])])])]),M,Object(l["h"])("div",P,[Object(l["h"])("div",J,[Object(l["h"])("table",T,[U,Object(l["h"])("tbody",Y,[0===$.selected_day_presences.length?(Object(l["t"])(),Object(l["d"])("tr",F,[L])):(Object(l["t"])(!0),Object(l["d"])(l["a"],{key:1},Object(l["z"])($.selected_day_presences,(function(e){return Object(l["t"])(),Object(l["d"])("tr",{key:e},[Object(l["h"])("td",null,Object(l["D"])(e.firstname),1),Object(l["h"])("td",null,Object(l["D"])(e.lastname),1),Object(l["h"])("td",null,[Object(l["h"])("a",{href:"mailto:".concat(e.email)},Object(l["D"])(e.email),9,["href"])]),Object(l["h"])("td",null,Object(l["D"])(e.arrival),1),Object(l["h"])("td",null,Object(l["D"])(e.departure?e.departure:""),1)])})),128))])])])])]})),_:1},8,["title","opened","onClose"])]})),_:1})})),z=(n("b64b"),n("d81d"),n("d3b7"),n("ddb0"),n("13d5"),n("714b")),K=n("6c02"),V=n("4360"),q={name:"Calendar",components:{Modal:z["a"]},setup:function(e,t){var n=t.emit,r=Object(K["c"])(),c=Object(V["c"])(),s=c.api_base,d=c.days,i=c.months,o=c.user.id,u=Object(V["a"])(),b=u.calendar,v=u.calendar_date,f=u.current_date,h=u.nb_days,O=u.setCalendar,j=u.setCalendarDate,g=u.setNbDays,p=u.registerBankHoliday,y=u.getBankHolidayLabel,_=u.isBankHoliday,m=Object(V["d"])(),x=m.loader_visible,k=m.show_loader,w=m.hide_loader,E=Object(l["y"])(!1),D=Object(l["y"])(new Date),R=Object(l["y"])([]),I=Object(l["y"])([]),C=Object(l["b"])((function(){return 1===v.value.month?Object.keys(b.value):Object.keys(b.value).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t}))})),S=Object(l["b"])((function(){return d[D.value.getDay()]+" "+D.value.getDate()+" "+i[D.value.getMonth()+1]+" "+D.value.getFullYear()})),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;k(),null===t&&(t=(new Date).getFullYear()),null===e&&(e=(new Date).getMonth()+1),fetch("".concat(s,"/calendar/").concat(t,"/").concat(e)).then((function(e){return e.json()})).then((function(e){O(e.calendar),j(e.year,e.month),g(e.nb_days.previous,e.nb_days.next),w()}))},N=function(e,t){return Object(a["a"])(Array(t-e).keys()).map((function(t){return t+e}))},B=function(e){return e.reservations.reduce((function(e,t){return t.id_user===JSON.parse(localStorage.getItem("user")).id&&(e=!0),e}),!1)},H=function(e){return v.value.full_current_date.getFullYear()+"-"+(v.value.full_current_date.getMonth()+1)+"-"+v.value.full_current_date.getDate()===e.date},M=function(e){var t=JSON.parse(e.target.hasAttribute("data-day")?e.target.getAttribute("data-day"):e.target.parentElement.getAttribute("data-day"));R.value=t.reservations,I.value=t.presences,D.value=new Date(t.date),E.value=!0,n("modal-opened")},P=function(){E.value=!1,n("modal-closed")},J=function(e){fetch("".concat(s,"/reservation"),{method:"post",body:JSON.stringify({user_id:o,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||A(v.value.full_current_date.getMonth()+1,v.value.full_current_date.getFullYear())}))},T=function(e){fetch("".concat(s,"/reservation"),{method:"delete",body:JSON.stringify({user_id:o,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||A(v.value.full_current_date.getMonth()+1,v.value.full_current_date.getFullYear())}))},U=function(e){return B(e)?T(e):J(e)},Y=function(e,t){return e.external_day=void 0!==e.external_day&&e.external_day,(!e||!e.external_day&&!_(e.date))&&M(t)};return A(),Object(l["o"])((function(){localStorage.getItem("user")||r.push("/login"),p()})),{calendar:b,months:i,calendar_date:v,current_date:f,nb_days:h,calendar_modal_opened:E,selected_day_reservations:R,selected_day_presences:I,loader_visible:x,calendar_keys:C,selected_modal_day:S,request_calendar:A,range:N,reserved:B,is_today:H,build_modal:M,calendar_modal_closed:P,toggle_reservation:U,getBankHolidayLabel:y,isBankHoliday:_,toggle_build_modal:Y,show_loader:k,hide_loader:w}}};n("4d84");q.render=$,q.__scopeId="data-v-4f99349f";t["default"]=q},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),l=n("b622"),c=n("9263"),s=n("9112"),d=l("species"),i=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o=function(){return"$0"==="a".replace(/./,"$0")}(),u=l("replace"),b=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),v=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,u){var f=l(e),h=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),O=h&&!r((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[d]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!h||!O||"replace"===e&&(!i||!o||b)||"split"===e&&!v){var j=/./[f],g=n(f,""[e],(function(e,t,n,a,r){return t.exec===c?h&&!r?{done:!0,value:j.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:b}),p=g[0],y=g[1];a(String.prototype,e,p),a(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}u&&s(RegExp.prototype[f],"sham",!0)}}}]);
//# sourceMappingURL=chunk-0b273522.6afe822b.js.map