(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6335eb41"],{1276:function(e,t,n){"use strict";var a=n("d784"),r=n("44e7"),c=n("825a"),l=n("1d80"),d=n("4840"),s=n("8aa5"),i=n("50c4"),o=n("14c3"),u=n("9263"),b=n("d039"),v=[].push,h=Math.min,O=4294967295,j=!b((function(){return!RegExp(O,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(l(this)),c=void 0===n?O:n>>>0;if(0===c)return[];if(void 0===e)return[a];if(!r(e))return t.call(a,e,c);var d,s,i,o=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,j=new RegExp(e.source,b+"g");while(d=u.call(j,a)){if(s=j.lastIndex,s>h&&(o.push(a.slice(h,d.index)),d.length>1&&d.index<a.length&&v.apply(o,d.slice(1)),i=d[0].length,h=s,o.length>=c))break;j.lastIndex===d.index&&j.lastIndex++}return h===a.length?!i&&j.test("")||o.push(""):o.push(a.slice(h)),o.length>c?o.slice(0,c):o}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=l(this),c=void 0==t?void 0:t[e];return void 0!==c?c.call(t,r,n):a.call(String(r),t,n)},function(e,r){var l=n(a,e,this,r,a!==t);if(l.done)return l.value;var u=c(e),b=String(this),v=d(u,RegExp),f=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(j?"y":"g"),p=new v(j?u:"^(?:"+u.source+")",g),y=void 0===r?O:r>>>0;if(0===y)return[];if(0===b.length)return null===o(p,b)?[b]:[];var _=0,m=0,x=[];while(m<b.length){p.lastIndex=j?m:0;var k,w=o(p,j?b:b.slice(m));if(null===w||(k=h(i(p.lastIndex+(j?0:m)),b.length))===_)m=s(b,m,f);else{if(x.push(b.slice(_,m)),x.length===y)return x;for(var E=1;E<=w.length-1;E++)if(x.push(w[E]),x.length===y)return x;m=_=k}}return x.push(b.slice(_)),x}]}),!j)},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var c=n.call(e,t);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"2fe6":function(e,t,n){},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),c=n("b622"),l=c("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==r(e))}},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),c=RegExp.prototype.exec,l=String.prototype.replace,d=c,s=function(){var e=/a/,t=/b*/g;return c.call(e,"a"),c.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),i=r.UNSUPPORTED_Y||r.BROKEN_CARET,o=void 0!==/()??/.exec("")[1],u=s||o||i;u&&(d=function(e){var t,n,r,d,u=this,b=i&&u.sticky,v=a.call(u),h=u.source,O=0,j=e;return b&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),j=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(h="(?: "+h+")",j=" "+j,O++),n=new RegExp("^(?:"+h+")",v)),o&&(n=new RegExp("^"+h+"$(?!\\s)",v)),s&&(t=u.lastIndex),r=c.call(b?n:u,j),b?r?(r.input=r.input.slice(O),r[0]=r[0].slice(O),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:s&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),o&&r&&r.length>1&&l.call(r[0],n,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(r[d]=void 0)})),r}),e.exports=d},"9f7f":function(e,t,n){"use strict";var a=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac0f:function(e,t,n){"use strict";n.r(t);var a=n("2909"),r=n("ade3"),c=(n("99af"),n("1276"),n("ac1f"),n("7a23")),l=Object(c["I"])("data-v-06d9cd42");Object(c["w"])("data-v-06d9cd42");var d={class:"container-fluid"},s={class:"row"},i={class:"col-12 mt-2"},o={class:"container-fluid calendar-header"},u={class:"row"},b={class:"col-12 col-md-12 date"},v=Object(c["f"])('<div class="row" data-v-06d9cd42><div class="col-2" data-v-06d9cd42><strong class="d-none d-md-inline" data-v-06d9cd42>Lundi</strong><strong class="d-inline d-md-none" data-v-06d9cd42>L.</strong></div><div class="col-2" data-v-06d9cd42><strong class="d-none d-md-inline" data-v-06d9cd42>Mardi</strong><strong class="d-inline d-md-none" data-v-06d9cd42>M.</strong></div><div class="col-2" data-v-06d9cd42><strong class="d-none d-md-inline" data-v-06d9cd42>Mercredi</strong><strong class="d-inline d-md-none" data-v-06d9cd42>M.</strong></div><div class="col-2" data-v-06d9cd42><strong class="d-none d-md-inline" data-v-06d9cd42>Jeudi</strong><strong class="d-inline d-md-none" data-v-06d9cd42>J.</strong></div><div class="col-2" data-v-06d9cd42><strong class="d-none d-md-inline" data-v-06d9cd42>Vendredi</strong><strong class="d-inline d-md-none" data-v-06d9cd42>V.</strong></div></div>',1),h={class:"container-fluid calendar-body"},O={class:"badges-container"},j={key:0,class:"nb-reservations badge bg-secondary text-light"},f={class:"badge rounded-pill bg-info text-dark"},g={key:0},p={class:"d-none d-md-inline"},y={class:"d-none d-md-inline"},_=Object(c["h"])("div",{class:"col-0 col-md-2"},null,-1),m={class:"badges-container"},x={key:0,class:"nb-reservations badge bg-secondary text-light"},k={class:"badge rounded-pill bg-info text-dark"},w={key:0},E={class:"d-none d-md-inline"},D={class:"d-none d-md-inline"},R=Object(c["h"])("div",{class:"col-0 col-md-2"},null,-1),I={class:"row"},C={class:"col-12"},S={class:"table table-responsive"},A=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Nom"),Object(c["h"])("th",null,"Prénom"),Object(c["h"])("th",null,"Email")])],-1),N={class:"reservations"},B={key:0},H=Object(c["h"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}}," Aucune réservation ce jour ",-1),M=Object(c["h"])("div",{class:"row"},[Object(c["h"])("div",{class:"col-12"},[Object(c["h"])("h2",null,"Personnes actuellement présentes")])],-1),P={class:"row"},J={class:"col-12"},T={class:"table table-responsive"},U=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Nom"),Object(c["h"])("th",null,"Prénom"),Object(c["h"])("th",null,"Email"),Object(c["h"])("th",null,"Arrivée"),Object(c["h"])("th",null,"Départ")])],-1),Y={class:"presences"},F={key:0},L=Object(c["h"])("td",{colspan:"5",style:{"text-align":"center","font-weight":"bold"}}," Aucune personnes présentes ce jour ",-1);Object(c["u"])();var $=l((function(e,t,n,$,z,K){var V=Object(c["B"])("fragment"),q=Object(c["B"])("Modal");return Object(c["t"])(),Object(c["d"])(V,null,{default:l((function(){return[Object(c["h"])("div",d,[Object(c["h"])("div",s,[Object(c["h"])("div",i,[Object(c["h"])("div",o,[Object(c["h"])("div",u,[Object(c["h"])("div",b,[Object(c["h"])("h2",null,Object(c["D"])($.months[$.calendar_date.month])+" "+Object(c["D"])($.calendar_date.year),1)])]),v]),Object(c["h"])("div",h,[Object(c["h"])(V,{set:e.previous_month_nb_days=$.nb_days.previous},null,8,["set"]),Object(c["h"])("div",{class:"row",set:e.week_nb_str="number"===typeof $.calendar_keys[0]?"".concat($.calendar_keys[0]<10?"0":"").concat($.calendar_keys[0]):$.calendar_keys[0]},[Object(c["h"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),Object(c["h"])("div",null,Object(c["D"])(e.day),1),(Object(c["t"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(e.week,(function(e){return Object(c["t"])(),Object(c["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"previous-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(c["H"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(c["h"])("div",O,[e.reservations.length>0?(Object(c["t"])(),Object(c["d"])("span",j,Object(c["D"])(e.reservations.length),1)):Object(c["e"])("",!0),Object(c["h"])("span",f,Object(c["D"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(c["e"])("",!0):(Object(c["t"])(),Object(c["d"])("div",g,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(c["t"])(),Object(c["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(c["h"])("span",p,Object(c["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(c["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(c["t"])(),Object(c["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(c["H"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(c["h"])("span",y,Object(c["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(c["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),_],8,["set"]),Object(c["h"])(V,{set:e._calendar_keys=Object(a["a"])($.calendar_keys)},null,8,["set"]),Object(c["h"])(V,{set:e._calendar_keys.shift()},null,8,["set"]),(Object(c["t"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(e._calendar_keys,(function(t){return Object(c["t"])(),Object(c["d"])("div",{class:"row",key:t,set:e.week_nb_str="number"===typeof t?"".concat(t<10?"0":"").concat(t):t},[Object(c["h"])(V,{set:e.week=$.calendar[e.week_nb_str]},null,8,["set"]),(Object(c["t"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(e.week,(function(e){return Object(c["t"])(),Object(c["d"])("div",{class:{"col-2":!0,"calendar-day":!0,today:$.is_today(e),"next-month-day":e.external_day,reserved:$.reserved(e),"bank-holiday":$.isBankHoliday(e.date)},key:e.day,"data-day":JSON.stringify(e),onClick:Object(c["H"])((function(t){return $.toggle_build_modal(e,t)}),["prevent"])},[Object(c["h"])("div",m,[e.reservations.length>0?(Object(c["t"])(),Object(c["d"])("span",x,Object(c["D"])(e.reservations.length),1)):Object(c["e"])("",!0),Object(c["h"])("span",k,Object(c["D"])(e.date.split("-")[2]),1)]),$.isBankHoliday(e.date)?Object(c["e"])("",!0):(Object(c["t"])(),Object(c["d"])("div",w,[5===e.reservations.length&&!$.reserved(e)||e.external_day?(Object(c["t"])(),Object(c["d"])("button",{key:0,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e),"btn-disabled":!0},disabled:"disabled",hidden:!0},[Object(c["h"])("span",E,Object(c["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(c["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],2)):(Object(c["t"])(),Object(c["d"])("button",{key:1,type:"button",class:{btn:!0,"btn-primary":!0,"btn-sm":!0,reserved:$.reserved(e)},onClick:Object(c["H"])((function(t){return $.toggle_reservation(e)}),["prevent","stop"])},[Object(c["h"])("span",D,Object(c["D"])($.reserved(e)?"Annuler":"Réserver"),1),Object(c["h"])("i",{class:Object(r["a"])({fas:!0,"d-inline":!0,"d-md-none":!0},$.reserved(e)?"fa-user-minus":"fa-user-plus",!0)},null,2)],10,["onClick"]))]))],10,["data-day","onClick"])})),128)),R],8,["set"])})),128))])])])]),Object(c["h"])(q,{title:$.selected_modal_day,body_title:"Réservations",opened:$.calendar_modal_opened,onClose:$.calendar_modal_closed},{default:l((function(){return[Object(c["h"])("div",I,[Object(c["h"])("div",C,[Object(c["h"])("table",S,[A,Object(c["h"])("tbody",N,[0===$.selected_day_reservations.length?(Object(c["t"])(),Object(c["d"])("tr",B,[H])):(Object(c["t"])(!0),Object(c["d"])(c["a"],{key:1},Object(c["z"])($.selected_day_reservations,(function(e){return Object(c["t"])(),Object(c["d"])("tr",{key:e},[Object(c["h"])("td",null,Object(c["D"])(e.firstname),1),Object(c["h"])("td",null,Object(c["D"])(e.lastname),1),Object(c["h"])("td",null,[Object(c["h"])("a",{href:"mailto:".concat(e.email)},Object(c["D"])(e.email),9,["href"])])])})),128))])])])]),M,Object(c["h"])("div",P,[Object(c["h"])("div",J,[Object(c["h"])("table",T,[U,Object(c["h"])("tbody",Y,[0===$.selected_day_presences.length?(Object(c["t"])(),Object(c["d"])("tr",F,[L])):(Object(c["t"])(!0),Object(c["d"])(c["a"],{key:1},Object(c["z"])($.selected_day_presences,(function(e){return Object(c["t"])(),Object(c["d"])("tr",{key:e},[Object(c["h"])("td",null,Object(c["D"])(e.firstname),1),Object(c["h"])("td",null,Object(c["D"])(e.lastname),1),Object(c["h"])("td",null,[Object(c["h"])("a",{href:"mailto:".concat(e.email)},Object(c["D"])(e.email),9,["href"])]),Object(c["h"])("td",null,Object(c["D"])(e.arrival),1),Object(c["h"])("td",null,Object(c["D"])(e.departure?e.departure:""),1)])})),128))])])])])]})),_:1},8,["title","opened","onClose"])]})),_:1})})),z=(n("b64b"),n("d81d"),n("d3b7"),n("ddb0"),n("13d5"),n("714b")),K=n("6c02"),V=n("4360"),q={name:"Calendar",components:{Modal:z["a"]},setup:function(e,t){var n=t.emit,r=Object(K["c"])(),l=Object(V["c"])(),d=l.api_base,s=l.days,i=l.months,o=l.user.id,u=Object(V["a"])(),b=u.calendar,v=u.calendar_date,h=u.current_date,O=u.nb_days,j=u.setCalendar,f=u.setCalendarDate,g=u.setNbDays,p=u.registerBankHoliday,y=u.getBankHolidayLabel,_=u.isBankHoliday,m=Object(V["d"])(),x=m.loader_visible,k=m.show_loader,w=m.hide_loader,E=Object(c["y"])(!1),D=Object(c["y"])(new Date),R=Object(c["y"])([]),I=Object(c["y"])([]),C=Object(c["b"])((function(){return 1===v.value.month?Object.keys(b.value):Object.keys(b.value).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t}))})),S=Object(c["b"])((function(){return s[D.value.getDay()]+" "+D.value.getDate()+" "+i[D.value.getMonth()+1]+" "+D.value.getFullYear()})),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;k(),null===t&&(t=(new Date).getFullYear()),null===e&&(e=(new Date).getMonth()+1),fetch("".concat(d,"/calendar/").concat(t,"/").concat(e)).then((function(e){return e.json()})).then((function(e){j(e.calendar),f(e.year,e.month),g(e.nb_days.previous,e.nb_days.next),w()}))},N=function(e,t){return Object(a["a"])(Array(t-e).keys()).map((function(t){return t+e}))},B=function(e){return e.reservations.reduce((function(e,t){return t.id_user===JSON.parse(localStorage.getItem("user")).id&&(e=!0),e}),!1)},H=function(e){return v.value.full_current_date.getFullYear()+"-"+(v.value.full_current_date.getMonth()+1)+"-"+v.value.full_current_date.getDate()===e.date},M=function(e){var t=JSON.parse(e.target.hasAttribute("data-day")?e.target.getAttribute("data-day"):e.target.parentElement.getAttribute("data-day"));R.value=t.reservations,I.value=t.presences,D.value=new Date(t.date),E.value=!0,n("modal-opened")},P=function(){E.value=!1,n("modal-closed")},J=function(e){fetch("".concat(d,"/reservation"),{method:"post",mode:"cors",body:JSON.stringify({user_id:o,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||A(v.value.full_current_date.getMonth()+1,v.value.full_current_date.getFullYear())}))},T=function(e){fetch("".concat(d,"/reservation"),{method:"delete",mode:"cors",body:JSON.stringify({user_id:o,date:e.date})}).then((function(e){return e.json()})).then((function(e){e.error||A(v.value.full_current_date.getMonth()+1,v.value.full_current_date.getFullYear())}))},U=function(e){return B(e)?T(e):J(e)},Y=function(e,t){return e.external_day=void 0!==e.external_day&&e.external_day,(!e||!e.external_day&&!_(e.date))&&M(t)};return A(),Object(c["o"])((function(){localStorage.getItem("user")||r.push("/login"),p()})),{calendar:b,months:i,calendar_date:v,current_date:h,nb_days:O,calendar_modal_opened:E,selected_day_reservations:R,selected_day_presences:I,loader_visible:x,calendar_keys:C,selected_modal_day:S,request_calendar:A,range:N,reserved:B,is_today:H,build_modal:M,calendar_modal_closed:P,toggle_reservation:U,getBankHolidayLabel:y,isBankHoliday:_,toggle_build_modal:Y,show_loader:k,hide_loader:w}}};n("fa2b");q.render=$,q.__scopeId="data-v-06d9cd42";t["default"]=q},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),c=n("b622"),l=n("9263"),d=n("9112"),s=c("species"),i=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o=function(){return"$0"==="a".replace(/./,"$0")}(),u=c("replace"),b=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),v=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,u){var h=c(e),O=!r((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),j=O&&!r((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!O||!j||"replace"===e&&(!i||!o||b)||"split"===e&&!v){var f=/./[h],g=n(h,""[e],(function(e,t,n,a,r){return t.exec===l?O&&!r?{done:!0,value:f.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:b}),p=g[0],y=g[1];a(String.prototype,e,p),a(RegExp.prototype,h,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}u&&d(RegExp.prototype[h],"sham",!0)}},fa2b:function(e,t,n){"use strict";n("2fe6")}}]);
//# sourceMappingURL=chunk-6335eb41.4e53fb1f.js.map